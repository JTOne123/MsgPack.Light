parameters:
  path: ''
  framework: ''

steps:
- template: parameter.yml
  parameters:
    name: path
    value: ${{ parameters.path }}
- template: parameter.yml
  parameters:
    name: framework
    value: ${{ parameters.framework }}

- task: DotNetCoreCLI@2
  displayName: ${{ format('dotnet build -f {0}', parameters.framework) }}
  inputs:
    command: build
    configuration: Release
    projects: ${{ parameters.path }}
    arguments: ${{ format('-f {0}', parameters.framework) }}

- task: DotNetCoreCLI@2
  displayName: ${{ format('dotnet test -f {0}', parameters.framework) }}
  inputs:
    command: test
    nobuild: true
    configuration: Release
    projects: ${{ parameters.path }}
    arguments: ${{ format('--logger trx -f {0}', parameters.framework) }}

